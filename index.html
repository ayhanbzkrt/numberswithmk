<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="pageTitle">Sayılarla Millet Kütüphanesi</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* GENEL STİLLER */
body {
    font-family: "Poppins", sans-serif;
    color: #fff;
    margin: 0;
    overflow-x: hidden;
    position: relative;
    min-height: 100vh;
}

/* YENİ: ARKA PLAN BANNER VE ÜZERİNE KARARTICI KATMAN */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    /* Yeni arka plan banner'ı */
    background: url('https://mk.gov.tr/GalleryFiles/56/banner-compressed-65863c7d-c86d-4ff1-bb3d-862129291357.png') no-repeat center center fixed;
    background-size: cover; /* Tüm alanı kapla */
    filter: brightness(0.4) grayscale(0.2); /* Hafif karartma ve gri tonlama */
    z-index: -2; /* En arkaya gönder */
    pointer-events: none;
}
/* YENİ: İkinci bir katman ekleyerek daha da karartabiliriz veya renk tonu verebiliriz */
body::after {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6); /* Genel koyuluk */
    z-index: -1; /* Banner'ın önünde, içeriğin arkasında */
    pointer-events: none;
}

/* HEADER TASARIM DÜZELTMESİ: KOYU LACİVERT / ALTIN TONLARI */
header {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    background: linear-gradient(90deg, #0b1a33, #04142b); /* Koyu Lacivert */
    padding: 30px 20px;
    font-size: 26px;
    letter-spacing: 1px;
    font-weight: 700;
    color: #E0C17E; /* Altın Başlık Rengi */
    box-shadow: 0 0 25px rgba(0,0,0,0.8);
    z-index: 10;
}
/* LOGO BÜYÜTÜLDÜ VE KONUMU AYARLANDI */
header .logo {
    position: absolute;
    left: 25px;
    top: 50%;
    transform: translateY(-50%);
    width: 100px; /* Büyütüldü */
    height: 100px; /* Büyütüldü */
    background: url('https://mk.gov.tr/NewDesignAssets/images/milletkutuphanesi_logo_vertical.svg') no-repeat center/contain;
    animation: blink 1.5s infinite alternate;
}
@keyframes blink {
    from { filter: brightness(1.5); }
    to { filter: brightness(3); }
}
/* DİL BUTONU (ALTIN TEMALI) */
.lang-switch {
    position: absolute;
    right: 25px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(224,193,126,0.2); /* Altın tonu */
    color: #E0C17E;
    border: 1px solid #D4AF37;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: background 0.3s;
}
.lang-switch:hover {
    background: #D4AF37;
    color: #0b1a33;
}

/* ANA SAYFA İSTATİSTİK KARTLARI (Küçük Kartlar) */
.main-stats-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 40px 20px 20px;
    gap: 30px;
    position: relative;
    z-index: 2;
}
.stat-item {
    background: linear-gradient(145deg, rgba(224,193,126,0.1), rgba(224,193,126,0.05)); /* Altın tonlarından hafif transparan */
    border-radius: 16px;
    width: 280px;
    height: 180px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5), 0 0 15px rgba(224,193,126, 0.3) inset; /* Altın iç parlama */
    transition: transform 0.3s, box-shadow 0.3s;
    border: 2px solid #E0C17E; /* Altın border */
    text-align: center;
    cursor: default;
}
.stat-item:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(224,193,126,0.4), 0 0 25px #E0C17E inset; 
    border-color: #D4AF37;
}
.stat-icon {
    font-size: 45px;
    color: #D4AF37; /* Altın ikon */
    margin-bottom: 5px;
    animation: pulse 2s infinite ease-in-out;
    text-shadow: 0 0 10px rgba(224, 193, 126, 0.8);
}
@keyframes pulse {
    0% { transform: scale(1); opacity: 0.9; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 0.9; }
}
.stat-number {
    font-size: 38px;
    font-weight: 800;
    color: #fff;
    text-shadow: 0 0 10px #0bb4ff;
    margin-bottom: 5px;
}
.stat-number .unit {
    font-size: 0.6em; 
    font-weight: 600;
    margin-left: 5px;
}
.stat-description {
    color: #E0C17E; /* Altın açıklama metni */
    font-weight: 600;
}

/* DETAY KARTLARI TEMALARI - HER KARTA ÖZEL TON VE 3D ETKİSİ */
.detail-card-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 30px;
    padding: 20px;
}
.single-detail-card {
    border-radius: 16px;
    width: 100%;
    max-width: 400px;
    backdrop-filter: blur(5px);
    cursor: pointer;
    position: relative;
    transition: all 0.4s ease-in-out;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 25px;
    transform-style: preserve-3d; /* 3D dönüşümler için */
    perspective: 1000px;
}
.single-detail-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01)); /* Hafif cam efekti */
    z-index: -1;
    transform: translateZ(-1px); /* Hafif geriye itme */
}
.single-detail-card:hover {
    transform: translateY(-10px) rotateX(5deg);
    box-shadow: 0 25px 50px rgba(0,0,0,0.7);
}
.single-detail-card h3 {
    margin-top: 15px;
    font-size: 1.4em;
    text-align: center;
    font-weight: 700;
    line-height: 1.4;
    text-shadow: 0 0 8px rgba(0,0,0,0.5);
}
.single-detail-card i {
    font-size: 55px;
    margin-bottom: 10px;
    text-shadow: 0 0 15px;
}

/* KOLEKSİYON TEMASI: Derin Mor & Altın */
.single-detail-card:nth-child(1) {
    background: linear-gradient(135deg, rgba(75, 0, 130, 0.7), rgba(40, 0, 70, 0.8)); /* Daha koyu ve zengin mor */
    box-shadow: 0 15px 30px rgba(0,0,0,0.6), 0 0 20px rgba(159, 125, 205, 0.6) inset;
    border: 2px solid #D4AF37; /* Altın çerçeve */
}
.single-detail-card:nth-child(1) h3 {
    color: #E0C17E; /* Altın başlık */
}
.single-detail-card:nth-child(1) i {
    color: #D4AF37; /* Altın ikon */
    text-shadow: 0 0 15px rgba(224, 193, 126, 0.8);
}

/* ZİYARETÇİ 2025 TEMASI: Canlı Mavi & Turkuaz */
.single-detail-card:nth-child(2) {
    background: linear-gradient(135deg, rgba(11, 180, 255, 0.7), rgba(5, 90, 120, 0.8)); /* Canlı maviden koyuya */
    box-shadow: 0 15px 30px rgba(0,0,0,0.6), 0 0 20px rgba(11, 180, 255, 0.6) inset;
    border: 2px solid #00ffaa; /* Turkuaz çerçeve */
}
.single-detail-card:nth-child(2) h3 {
    color: #00ffaa; /* Turkuaz başlık */
}
.single-detail-card:nth-child(2) i {
    color: #0bb4ff; /* Mavi ikon */
    text-shadow: 0 0 15px rgba(11, 180, 255, 0.8);
}

/* YILLIK ZİYARETÇİ TEMASI: Sıcak Turuncu & Fuşya */
.single-detail-card:nth-child(3) {
    background: linear-gradient(135deg, rgba(255, 136, 0, 0.7), rgba(200, 50, 0, 0.8)); /* Sıcak turuncudan koyu kırmızıya */
    box-shadow: 0 15px 30px rgba(0,0,0,0.6), 0 0 20px rgba(255, 0, 85, 0.6) inset;
    border: 2px solid #ff0055; /* Fuşya çerçeve */
}
.single-detail-card:nth-child(3) h3 {
    color: #ff0055; /* Fuşya başlık */
}
.single-detail-card:nth-child(3) i {
    color: #ff8800; /* Turuncu ikon */
    text-shadow: 0 0 15px rgba(255, 136, 0, 0.8);
}

/* DETAY PENCERESİ STİLLERİ (Genel Olarak Korundu, küçük renk güncellemeleri) */
.details {
    display: none;
    background: rgba(0,0,0,0.95);
    position: fixed;
    inset: 0;
    z-index: 1000;
    overflow: auto;
    backdrop-filter: blur(12px);
    padding: 20px;
}
.details-content {
    margin: 80px auto;
    width: 90%;
    max-width: 1100px;
    background: rgba(18,30,50,0.98);
    border-radius: 18px;
    padding: 40px;
    box-shadow: 0 0 40px rgba(11,180,255,0.6); /* Genel detay penceresi için mavi gölge */
    animation: fadeInScale 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}
.details h2 {
    color: #E0C17E; /* Ana başlıklar altın */
    font-size: 32px;
    border-bottom: 2px solid rgba(224,193,126,0.5);
    padding-bottom: 10px;
    margin-bottom: 25px;
    font-weight: 700;
    text-align: center;
}
.details h2 i {
    margin-right: 15px;
    font-size: 35px;
    color: #0bb4ff; /* İkonlar mavi */
}
.details h3 {
    color: #0bb4ff; /* Alt başlıklar mavi */
    margin-top: 40px;
    border-bottom: 1px solid rgba(11,180,255,0.3);
    padding-bottom: 10px;
    font-weight: 600;
    font-size: 22px;
}
.details h3 i {
    margin-right: 10px;
    color: #E0C17E; /* Altın ikon */
}

/* TABLO VE STATİK İSTATİSTİK STİLLERİ */
.table-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin-top: 30px;
}
.table-container {
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
}
.table-container h4 {
    color: #00ffaa;
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.1em;
    border-bottom: 1px dashed rgba(255,255,255,0.1);
    padding-bottom: 10px;
}
table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95em;
}
table th, table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    color: #ccc;
}
table th {
    background-color: rgba(255,255,255,0.1);
    font-weight: 600;
    color: #E0C17E; /* Altın başlık */
}
table tr:last-child td {
    border-bottom: none;
}
table tbody tr:hover {
    background-color: rgba(255,255,255,0.03);
}

/* Tablo Vurgu Renkleri */
.details tbody tr.highlight-row td {
    font-weight: 800;
    background: #E0C17E22;
    color: #E0C17E; /* Altın Vurgu */
    font-size: 16px;
}
.details tbody tr.total-row td {
    font-weight: 800;
    background: #ff005544;
    color: #E0C17E; /* Altın Vurgu */
    font-size: 16px;
}
.details p {
    color: #aaa;
    line-height: 1.6;
}

/* YENİ: DİNAMİK MİNİ STAT KARTLARI */
.mega-stat-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
}
.mini-stat-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    border-radius: 10px;
    width: 250px;
    padding: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    border: 1px solid #E0C17E55;
    text-align: center;
    transition: transform 0.3s, border-color 0.3s;
    cursor: pointer; /* Tıklanabilir hale geldi */
    position: relative;
}
.mini-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    border-color: #00ffaa;
}
.mini-stat-card .icon-box {
    font-size: 30px;
    margin-bottom: 5px;
    color: #00ffaa;
    text-shadow: 0 0 10px rgba(0,255,170,0.5);
    transition: color 0.3s;
}
.mini-stat-card .value {
    font-size: 1.5em;
    font-weight: 800;
    color: #fff;
}
.mini-stat-card .label {
    font-size: 0.8em;
    color: #E0C17E;
    font-weight: 500;
}
/* EK BİLGİ MODALI STİLİ */
.info-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #0b1a33, #04142b);
    border: 2px solid #E0C17E;
    border-radius: 10px;
    padding: 30px;
    box-shadow: 0 0 50px rgba(11, 180, 255, 0.8);
    z-index: 10000;
    width: 90%;
    max-width: 500px;
    display: none;
    flex-direction: column;
    align-items: center;
    animation: bounceIn 0.4s ease-out;
}
.info-popup.active {
    display: flex;
}
@keyframes bounceIn {
    0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
    60% { transform: translate(-50%, -50%) scale(1.05); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1); }
}
.info-popup h4 {
    color: #00ffaa;
    border-bottom: 2px solid #00ffaa;
    padding-bottom: 10px;
    margin-bottom: 15px;
    font-size: 1.5em;
}
.info-popup .detail-content {
    text-align: center;
}
.info-popup .detail-content strong {
    font-size: 2.5em;
    color: #E0C17E;
    display: block;
    margin-bottom: 10px;
    text-shadow: 0 0 10px #D4AF37;
}
.info-popup .detail-content p {
    font-size: 1em;
    color: #ccc;
}
.info-popup button {
    margin-top: 20px;
}
/* YENİ: Büyük Sayaçlar (Giant Stat) */
.giant-stat {
    text-align: center;
    margin-top: 30px;
    font-size: 2em;
    font-weight: 700;
    color: #00ffaa;
    text-shadow: 0 0 15px rgba(0,255,170,0.5);
    background: rgba(0,255,170,0.08);
    padding: 20px;
    border-radius: 10px;
    border: 1px solid #00ffaa33;
    animation: glowBorder 2s infinite alternate;
}
.giant-stat .value-text {
    font-size: 2.2em;
    color: #ff0055;
    display: block;
    margin-top: 10px;
}

/* Gauge Grafikleri (Korundu) */
.gauge-container {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 30px;
    margin-top: 40px;
    padding: 20px;
    background: rgba(224,193,126,0.05);
    border-radius: 10px;
    border: 1px solid #E0C17E33;
}
.mini-gauge {
    width: 250px;
    height: 250px;
    position: relative;
    text-align: center;
}
.mini-gauge .large-number {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 20px;
    font-weight: 700;
    color: #00ffaa;
    text-shadow: 0 0 5px rgba(0,255,170,0.5);
}

/* Chart Container */
.chart-container {
    position: relative;
    height: 400px; /* Sabit yükseklik */
    width: 100%;
    margin-top: 30px;
    background: rgba(0,0,0,0.2);
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 0 15px rgba(11,180,255,0.2);
}
/* Kapat Butonu */
.close-btn {
    display: block;
    margin: 40px auto 20px auto;
    padding: 12px 30px;
    background: linear-gradient(90deg, #D4AF37, #E0C17E); /* Altın renk */
    color: #0b1a33;
    border: none;
    border-radius: 8px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    transition: all 0.3s ease;
}
.close-btn:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    filter: brightness(1.1);
}
/* Responsive ve diğer stiller korunmuştur */
</style>
</head>
<body data-lang="tr">

<header>
    <div class="logo"></div>
    <span id="headerTitle" data-tr="Sayılarla Millet Kütüphanesi" data-en="Numbers with Nation's Library">Sayılarla Millet Kütüphanesi</span>
    <button class="lang-switch" onclick="toggleLanguage()" id="langSwitchBtn">EN</button>
</header>

<div class="main-stats-container">
    <div class="stat-item">
        <i class="fas fa-cube stat-icon"></i> <div class="stat-number"><span id="statArea">0</span> <span class="unit" data-tr="m²" data-en="m²">m²</span></div>
        <div class="stat-description" data-tr="Toplam Kullanım Alanı" data-en="Total Usage Area">Toplam Kullanım Alanı</div>
    </div>
    <div class="stat-item">
        <i class="fas fa-chair stat-icon"></i> <div class="stat-number"><span id="statCapacity">0</span> <span class="unit" data-tr="Kişilik" data-en="People">Kişilik</span></div>
        <div class="stat-description" data-tr="Oturma Kapasitesi" data-en="Seating Capacity">Oturma Kapasitesi</div>
    </div>
    <div class="stat-item">
        <i class="fas fa-book stat-icon"></i> <div class="stat-number"><span id="statBooks">0</span></div>
        <div class="stat-description" data-tr="Basılı Kayıtlı Kitap" data-en="Printed Registered Books">Basılı Kayıtlı Kitap</div>
    </div>
    <div class="stat-item">
        <i class="fas fa-archive stat-icon"></i> <div class="stat-number"><span id="statResources">0</span></div>
        <div class="stat-description" data-tr="Basılı Kayıtlı Kaynak Toplamı" data-en="Total Printed Resources">Basılı Kayıtlı Kaynak Toplamı</div>
    </div>
</div>

<div class="detail-card-container">
    <div class="single-detail-card" onclick="showDetails('fizikiolcek')">
        <i class="fas fa-database"></i>
        <h3 data-tr="TÜM KOLEKSİYONLAR ve FİZİKSEL ALTYAPI DETAYLARI" data-en="ALL COLLECTIONS and PHYSICAL INFRASTRUCTURE DETAILS">TÜM KOLEKSİYONLAR ve FİZİKSEL ALTYAPI DETAYLARI</h3>
    </div>
    <div class="single-detail-card" onclick="showDetails('ziyaretci')">
        <i class="fas fa-users-viewfinder"></i>
        <h3 data-tr="2025 YILI ZİYARETÇİ İSTATİSTİKLERİ" data-en="2025 VISITOR STATISTICS">2025 YILI ZİYARETÇİ İSTATİSTİKLERİ</h3>
    </div>
    <div class="single-detail-card yillik" onclick="showDetails('yillikziyaret')">
        <i class="fas fa-chart-area"></i>
        <h3 data-tr="2020-2024 YILLIK ZİYARETÇİ SAYILARI" data-en="2020-2024 ANNUAL VISITOR COUNTS">2020-2024 YILLIK ZİYARETÇİ SAYILARI</h3>
    </div>
</div>


<div class="details" id="detail-fizikiolcek">
    <div class="details-content">
        <h2 data-tr="Fiziksel Ölçek, Altyapı ve Koleksiyon Zenginliği" data-en="Physical Scale, Infrastructure and Collection Richness"><i class="fas fa-landmark"></i> Fiziksel Ölçek, Altyapı ve Koleksiyon Zenginliği</h2>

        <div class="giant-stat" data-tr="TOPLAM KOLEKSİYON ve YAYIN SAYISI (Kitap, Belge, Harita vb.)" data-en="TOTAL COLLECTION AND PUBLICATION COUNT (Book, Document, Map, etc.)">
            TOPLAM KOLEKSİYON ve YAYIN SAYISI (Kitap, Belge, Harita vb.)
            <div class="value-text">141.718.843</div>
        </div>
        
        <h3 style="color:#E0C17E;"><i class="fas fa-tachometer-alt"></i><span data-tr="I. FİZİKSEL VE DİJİTAL ANA VERİLER (Tıklanabilir Sayaçlar)" data-en="I. PHYSICAL AND DIGITAL MAIN DATA (Clickable Counters)">I. FİZİKSEL VE DİJİTAL ANA VERİLER (Tıklanabilir Sayaçlar)</span></h3>

        <div class="mega-stat-grid">
            <div class="mini-stat-card" onclick="showInfoPopup('area')">
                <div class="icon-box" style="color:#D4AF37;"><i class="fas fa-ruler-combined"></i></div>
                <div class="value"><span id="statAreaDetay">0</span> m²</div>
                <div class="label" data-tr="Kullanım Alanı" data-en="Usage Area">Kullanım Alanı</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('capacity')">
                <div class="icon-box" style="color:#0bb4ff;"><i class="fas fa-chair"></i></div>
                <div class="value"><span id="statCapacityDetay">0</span> Kişilik</div>
                <div class="label" data-tr="Oturma Kapasitesi" data-en="Seating Capacity">Oturma Kapasitesi</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('printedBook')">
                <div class="icon-box" style="color:#ff8800;"><i class="fas fa-book-open"></i></div>
                <div class="value"><span id="statBooksDetay">0</span></div>
                <div class="label" data-tr="Basılı Kayıtlı Kitap" data-en="Printed Books">Basılı Kayıtlı Kitap</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('totalResource')">
                <div class="icon-box" style="color:#E0C17E;"><i class="fas fa-boxes-stacked"></i></div>
                <div class="value"><span id="statResourcesDetay">0</span></div>
                <div class="label" data-tr="Basılı Kayıtlı Kaynak Toplamı" data-en="Total Printed Resources">Basılı Kayıtlı Kaynak Toplamı</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('periodical')">
                <div class="icon-box" style="color:#ff0055;"><i class="fas fa-book-journal-whills"></i></div>
                <div class="value">2.9M+</div>
                <div class="label" data-tr="Süreli Yayın (Adet)" data-en="Periodicals (Count)">Süreli Yayın (Adet)</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('digitalArchive')">
                <div class="icon-box" style="color:#00ffaa;"><i class="fas fa-scroll"></i></div>
                <div class="value">141M+</div>
                <div class="label" data-tr="Devlet Arşivleri Toplamı" data-en="State Archives Total">Devlet Arşivleri Toplamı</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('ethesis')">
                <div class="icon-box" style="color:#6f42c1;"><i class="fas fa-graduation-cap"></i></div>
                <div class="value">7.9M+</div>
                <div class="label" data-tr="Elektronik Tez" data-en="Electronic Theses">Elektronik Tez</div>
            </div>
            <div class="mini-stat-card" onclick="showInfoPopup('ejournal')">
                <div class="icon-box" style="color:#00ffff;"><i class="fas fa-newspaper"></i></div>
                <div class="value">300M+</div>
                <div class="label" data-tr="E-Dergi Makaleleri" data-en="E-Journal Articles">E-Dergi Makaleleri</div>
            </div>
        </div>
        <h3 style="color:#E0C17E;"><i class="fas fa-chart-pie"></i><span data-tr="III. ANA BASILI KOLEKSİYON ORANLARI VE KARŞILAŞTIRMASI" data-en="III. MAIN PRINTED COLLECTION RATIOS AND COMPARISON">III. ANA BASILI KOLEKSİYON ORANLARI VE KARŞILAŞTIRMASI</span></h3>
        
        <div class="gauge-container">
            <div class="mini-gauge">
                <h4 data-tr="Basılı Kitap Oranı" data-en="Printed Book Ratio">Basılı Kitap Oranı</h4>
                <canvas id="gaugeKitap"></canvas>
                <div class="large-number"><span id="kitapYuzde">0</span>%</div>
            </div>
            <div class="mini-gauge">
                <h4 data-tr="Basılı Kaynak Çeşitliliği" data-en="Printed Resource Diversity">Basılı Kaynak Çeşitliliği</h4>
                <canvas id="gaugeKaynak"></canvas>
                <div class="large-number"><span id="kaynakYuzde">0</span>%</div>
            </div>
            <div class="mini-gauge">
                <h4 data-tr="Süreli Yayın Oranı" data-en="Periodical Ratio">Süreli Yayın Oranı</h4>
                <canvas id="gaugeYayin"></canvas>
                <div class="large-number"><span id="yayinYuzde">0</span>%</div>
            </div>
        </div>
        <p style="margin-top:20px; font-style: italic; color:#ccc;" data-tr="Yukarıdaki göstergeler, ana basılı koleksiyonun toplam kayıtlı fiziksel kaynaklar içindeki oransal dağılımını gösterir. (Not: Toplam kayıtlı fiziksel kaynak adedi 5.048.493'tür.)" data-en="The indicators above show the proportional distribution of the main printed collection within the total registered physical resources. (Note: Total registered physical resource count is 5,048,493).">Yukarıdaki göstergeler, ana basılı koleksiyonun toplam kayıtlı fiziksel kaynaklar içindeki oransal dağılımını gösterir. (Not: Toplam kayıtlı fiziksel kaynak adedi 5.048.493'tür.)</p>
        
        <button class="close-btn" onclick="closeDetails('fizikiolcek')" data-tr="Kapat" data-en="Close">Kapat</button>
    </div>
</div>

<div class="info-popup" id="infoPopup">
    <h4 id="popupTitle"></h4>
    <div class="detail-content">
        <strong id="popupValue"></strong>
        <p id="popupDescription"></p>
        <div class="chart-container" style="height: 200px; display: none;" id="popupChartContainer">
             <canvas id="popupChart"></canvas>
        </div>
    </div>
    <button class="close-btn" onclick="closeInfoPopup()" data-tr="Kapat" data-en="Close">Kapat</button>
</div>
<div class="details" id="detail-ziyaretci">
    <div class="details-content">
        <h2 data-tr="2025 Yılı Ziyaretçi İstatistikleri (Günlük & Aylık)" data-en="2025 Visitor Statistics (Daily & Monthly)"><i class="fas fa-chart-line"></i> 2025 Yılı Ziyaretçi İstatistikleri (Günlük & Aylık)</h2>
        
        <h3 style="color:#00ffaa;"><i class="fas fa-calendar-alt"></i><span data-tr="Aylık Toplam Ziyaretçi Sayıları" data-en="Monthly Total Visitor Counts">Aylık Toplam Ziyaretçi Sayıları</span></h3>
        <div class="monthly-totals">
            <div class="monthly-total-item">
                <strong id="totalMart">0</strong>
                <span data-tr="Mart 2025" data-en="March 2025">Mart 2025</span>
            </div>
            <div class="monthly-total-item">
                <strong id="totalNisan">0</strong>
                <span data-tr="Nisan 2025" data-en="April 2025">Nisan 2025</span>
            </div>
            <div class="monthly-total-item">
                <strong id="totalMayis">0</strong>
                <span data-tr="Mayıs 2025" data-en="May 2025">Mayıs 2025</span>
            </div>
        </div>
        <div class="chart-container" style="margin-top: 40px;"><canvas id="aylikToplamChart"></canvas></div>
        <p style="margin-top:20px; font-style: italic; color:#ccc;" data-tr="Mart, Nisan ve Mayıs 2025 aylarına ait toplam ziyaretçi sayıları." data-en="Total visitor counts for March, April, and May 2025.">Mart, Nisan ve Mayıs 2025 aylarına ait toplam ziyaretçi sayıları.</p>

        <h3 style="color:#00ffaa;"><i class="fas fa-calendar-day"></i><span data-tr="Günlük Ziyaretçi İstatistikleri (Mart 2025)" data-en="Daily Visitor Statistics (March 2025)">Günlük Ziyaretçi İstatistikleri (Mart 2025)</span></h3>
        <div class="chart-container"><canvas id="martZiyaretciChart"></canvas></div>
        <p style="margin-top:20px; font-style: italic; color:#ccc;" data-tr="Mart 2025'teki günlük ziyaretçi istatistikleri (Ziyaretçi: Kütüphane genel ziyareti, Ziyaretçi (Turnike): Turnike geçişi yapan kişi sayısı)." data-en="Daily visitor statistics for March 2025 (Visitor: General library visit, Turnstile Visitor: Number of people passing through turnstile).">Mart 2025'teki günlük ziyaretçi istatistikleri (Ziyaretçi: Kütüphane genel ziyareti, Ziyaretçi (Turnike): Turnike geçişi yapan kişi sayısı).</p>

        <h3 style="color:#00ffaa;"><i class="fas fa-calendar-day"></i><span data-tr="Günlük Ziyaretçi İstatistikleri (Nisan 2025)" data-en="Daily Visitor Statistics (April 2025)">Günlük Ziyaretçi İstatistikleri (Nisan 2025)</span></h3>
        <div class="chart-container"><canvas id="nisanZiyaretciChart"></canvas></div>
        <p style="margin-top:20px; font-style: italic; color:#ccc;" data-tr="Nisan 2025'teki günlük ziyaretçi istatistikleri (Ziyaretçi: Kütüphane genel ziyareti, Ziyaretçi (Turnike): Turnike geçişi yapan kişi sayısı)." data-en="Daily visitor statistics for April 2025 (Visitor: General library visit, Turnstile Visitor: Number of people passing through turnstile).">Nisan 2025'teki günlük ziyaretçi istatistikleri (Ziyaretçi: Kütüphane genel ziyareti, Ziyaretçi (Turnike): Turnike geçişi yapan kişi sayısı).</p>
        
        <h3 style="color:#00ffaa;"><i class="fas fa-calendar-day"></i><span data-tr="Günlük Ziyaretçi İstatistikleri (Mayıs 2025)" data-en="Daily Visitor Statistics (May 2025)">Günlük Ziyaretçi İstatistikleri (Mayıs 2025)</span></h3>
        <div class="chart-container"><canvas id="mayisZiyaretciChart"></canvas></div>
        <p style="margin-top:20px; font-style: italic; color:#ccc;" data-tr="Mayıs 2025'teki günlük ziyaretçi istatistikleri (Ziyaretçi: Kütüphane genel ziyareti, Ziyaretçi (Turnike): Turnike geçişi yapan kişi sayısı)." data-en="Daily visitor statistics for May 2025 (Visitor: General library visit, Turnstile Visitor: Number of people passing through turnstile).">Mayıs 2025'teki günlük ziyaretçi istatistikleri (Ziyaretçi: Kütüphane genel ziyareti, Ziyaretçi (Turnike): Turnike geçişi yapan kişi sayısı).</p>

        <button class="close-btn" onclick="closeDetails('ziyaretci')" data-tr="Kapat" data-en="Close">Kapat</button>
    </div>
</div>

<div class="details" id="detail-yillikziyaret">
    <div class="details-content">
        <h2 data-tr="2020-2024 Yıllık Ziyaretçi Sayıları ve Eğilimi" data-en="2020-2024 Annual Visitor Counts and Trend"><i class="fas fa-chart-area"></i> 2020-2024 Yıllık Ziyaretçi Sayıları ve Eğilimi</h2>

        <h3 style="color:#ff0055;"><i class="fas fa-calendar-days"></i><span data-tr="Yıllık Ziyaret Sayısı Trendi (2020-2024)" data-en="Annual Visit Count Trend (2020-2024)">Yıllık Ziyaret Sayısı Trendi (2020-2024)</span></h3>
        <div class="chart-container"><canvas id="yillikTrendChart"></canvas></div>
        <p style="margin-top:20px; font-style: italic; color:#ccc;" data-tr="2020'den 2024'e yıllık ziyaretçi sayısındaki değişim trendi. COVID-19 etkileri nedeniyle 2020-2021 yılları düşük kalmıştır." data-en="Annual visitor count trend from 2020 to 2024. 2020-2021 numbers are low due to COVID-19 effects.">2020'den 2024'e yıllık ziyaretçi sayısındaki değişim trendi. COVID-19 etkileri nedeniyle 2020-2021 yılları düşük kalmıştır.</p>

        <h3 style="color:#ff0055;"><i class="fas fa-table"></i><span data-tr="Yıllara Göre Ziyaret Sayısı Detayı" data-en="Visit Count Detail by Year">Yıllara Göre Ziyaret Sayısı Detayı</span></h3>
        
        <div class="table-grid" style="grid-template-columns: 1fr; max-width: 400px; margin-left: auto; margin-right: auto;">
            <div class="table-container" style="background: rgba(255,0,85,0.1);">
                <table>
                    <thead>
                        <tr><td data-tr="Yıl" data-en="Year">Yıl</td><td data-tr="Ziyaret Sayısı" data-en="Visit Count">Ziyaret Sayısı</td></tr>
                    </thead>
                    <tbody>
                        <tr><td>2020</td><td>315.706</td></tr>
                        <tr><td>2021</td><td>673.117</td></tr>
                        <tr><td>2022</td><td>1.728.308</td></tr>
                        <tr><td>2023</td><td>2.042.344</td></tr>
                        <tr><td>2024</td><td>1.900.005</td></tr>
                        <tr class="total-row">
                            <td data-tr="Genel Toplam (2020-2024)" data-en="Grand Total (2020-2024)">Genel Toplam (2020-2024)</td>
                            <td>6.659.480</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <h3 style="color:#ff0055;"><i class="fas fa-percent"></i><span data-tr="Yıllık Ziyaret Oranları" data-en="Annual Visit Ratios">Yıllık Ziyaret Oranları</span></h3>
        <div class="chart-container"><canvas id="yillikOranChart"></canvas></div>

        <button class="close-btn" onclick="closeDetails('yillikziyaret')" data-tr="Kapat" data-en="Close">Kapat</button>
    </div>
</div>


<div class="info-popup" id="infoPopup">
    <h4 id="popupTitle"></h4>
    <div class="detail-content">
        <strong id="popupValue"></strong>
        <p id="popupDescription"></p>
        <div class="chart-container" style="height: 200px; display: none;" id="popupChartContainer">
             <canvas id="popupChart"></canvas>
        </div>
    </div>
    <button class="close-btn" onclick="closeInfoPopup()" data-tr="Kapat" data-en="Close">Kapat</button>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// --- DİL YÖNETİMİ ---
const translations = {
    tr: {
        headerTitle: "Sayılarla Millet Kütüphanesi", 
        pageTitle: "Sayılarla Millet Kütüphanesi",
        close: "Kapat",
        // Ana Sayfa Stat Açıklamaları
        totalUsageArea: "Toplam Kullanım Alanı",
        seatingCapacity: "Oturma Kapasitesi",
        printedRegisteredBooks: "Basılı Kayıtlı Kitap",
        totalPrintedResources: "Basılı Kayıtlı Kaynak Toplamı",
        
        // Fiziksel Ölçek Kartı
        fizikiolcek: "TÜM KOLEKSİYONLAR ve FİZİKSEL ALTYAPI DETAYLARI", 
        fizikiAlan: "Kullanım Alanı (m²)",
        fizikiKitap: "Basılı Kitap Oranı",
        fizikiKaynak: "Toplam Kaynak", 
        fizikiYayin: "Süreli Yayın Oranı",

        // Ziyaretçi Kartı
        ziyaretci: "2025 YILI ZİYARETÇİ İSTATİSTİKLERİ",
        dailyVisitor: "Ziyaretçi (Kütüphane Genel)",
        dailyTurnstile: "Ziyaretçi (Turnike)",
        monthMart: "Mart",
        monthNisan: "Nisan",
        monthMayis: "Mayıs",
        visitorCount: "Ziyaretçi Sayısı",
        
        // Yıllık Ziyaretçi Kartı
        yillikziyaret: "2020-2024 YILLIK ZİYARETÇİ SAYILARI",
        yillikTrend: "Yıllık Ziyaret Sayısı",
        yillikOran: "Yıllık Oran",

        // Popup Detayları (YENİ)
        popupArea: "Kütüphane Toplam Alanı",
        popupCapacity: "Anlık Oturma Kapasitesi",
        popupPrintedBook: "Toplam Basılı Kitap Sayısı",
        popupTotalResource: "Tüm Basılı Kayıtlı Kaynaklar",
        popupPeriodical: "Süreli Yayın (Adet) Detayları",
        popupDigitalArchive: "Devlet Arşivleri Koleksiyonu",
        popupEthesis: "Ulusal Elektronik Tez Sayısı",
        popupEjournal: "E-Dergi ve Makale Sayısı",
        
        descArea: "Kütüphanenin toplam kapalı ve açık kullanım alanını temsil eder.",
        descCapacity: "Aynı anda hizmet verebilen kullanıcı sayısıdır.",
        descPrintedBook: "Kayıtlı ve erişilebilir tekil basılı kitap adedidir.",
        descTotalResource: "Kitap, dergi, tez, harita vb. tüm kayıtlı basılı envanter toplamıdır.",
        descPeriodical: "Basılı olarak düzenli yayımlanan dergilerin ve süreli yayınların toplam adedidir.",
        descDigitalArchive: "Cumhurbaşkanlığı Millet Kütüphanesi üzerinden araştırmacılara sunulan tüm arşiv yayınlarıdır. (Dijital Kitap, Belge ve Defter dahil)",
        descEthesis: "Ulusal ve uluslararası veri tabanlarından erişilebilen tüm elektronik tezlerin toplam sayısıdır.",
        descEjournal: "73 veri tabanı içerisindeki 112 binden fazla e-dergiye ait toplam makale ve rapor sayısıdır.",
        
    },
    en: {
        headerTitle: "Numbers with Nation's Library", 
        pageTitle: "Numbers with Nation's Library",
        close: "Close",
        // Home Page Stat Descriptions
        totalUsageArea: "Total Usage Area",
        seatingCapacity: "Seating Capacity",
        printedRegisteredBooks: "Printed Registered Books",
        totalPrintedResources: "Total Printed Resources",

        // Physical Scale Card
        fizikiolcek: "ALL COLLECTIONS and PHYSICAL INFRASTRUCTURE DETAILS", 
        fizikiAlan: "Usage Area (m²)",
        fizikiKitap: "Printed Book Ratio",
        fizikiKaynak: "Total Resources", 
        fizikiYayin: "Periodical Ratio",

        // Visitor Card
        ziyaretci: "2025 VISITOR STATISTICS",
        dailyVisitor: "Visitor (General Library)",
        dailyTurnstile: "Visitor (Turnstile)",
        monthMart: "March",
        monthNisan: "April",
        monthMayis: "May",
        visitorCount: "Visitor Count",
        
        // Annual Visitor Card
        yillikziyaret: "2020-2024 ANNUAL VISITOR COUNTS",
        yillikTrend: "Annual Visit Count",
        yillikOran: "Annual Ratio",
        
        // Popup Detayları (YENİ)
        popupArea: "Total Library Area",
        popupCapacity: "Current Seating Capacity",
        popupPrintedBook: "Total Printed Book Count",
        popupTotalResource: "All Registered Printed Resources",
        popupPeriodical: "Periodicals (Count) Details",
        popupDigitalArchive: "State Archives Collection",
        popupEthesis: "National Electronic Theses Count",
        popupEjournal: "E-Journal and Article Count",
        
        descArea: "Represents the total indoor and outdoor usable area of the library.",
        descCapacity: "The number of users that can be served simultaneously.",
        descPrintedBook: "The count of registered and accessible individual printed books.",
        descTotalResource: "Total registered printed inventory including books, journals, theses, maps, etc.",
        descPeriodical: "The total count of regularly published printed journals and serials.",
        descDigitalArchive: "All archival publications presented to researchers via the Presidential Nation's Library. (Including Digital Books, Documents and Ledgers)",
        descEthesis: "The total number of electronic theses accessible from national and international databases.",
        descEjournal: "Total number of articles and reports belonging to over 112 thousand e-journals in 73 databases.",
    }
};

let currentLang = document.body.getAttribute('data-lang');

// YILLIK ZİYARETÇİ DATASI
const yillikData = {
    labels: ['2020', '2021', '2022', '2023', '2024'],
    visits: [315706, 673117, 1728308, 2042344, 1900005],
    total: 6659480
};

// FİZİKİ ÖLÇEK DATA
const fizikiData = {
    toplamKayitliKaynak: 5048493,
    basiliKitap: 2168302,
    basiliDergiBaslik: 25017,
    sureliYayinAdet: 2948290,
    alan: 125000,
    kapasite: 5000,
    digitalArchiveTotal: 141718843,
    eKitap: 1218475,
    eTez: 7901681,
    eDergiMakale: "300 Milyon+" // String bırakıldı
};

// Oranlar: Basılı Kitap / Toplam Kayıtlı Kaynak, Süreli Yayın Adedi / Toplam Kayıtlı Kaynak
const fizikiOranlar = {
    kitap: (fizikiData.basiliKitap / fizikiData.toplamKayitliKaynak) * 100,
    yayin: (fizikiData.sureliYayinAdet / fizikiData.toplamKayitliKaynak) * 100,
};


// 2025 AYLIK ZİYARETÇİ DATASI (Korundu)
const ziyaretciData = {
    mart: {
        labels: Array.from({length: 31}, (_, i) => `${i+1}.03.2025`),
        ziyaret: [11848, 12516, 4309, 6597, 5589, 6798, 7370, 16517, 13408, 4730, 6153, 6631, 7479, 7604, 13420, 13270, 4844, 6480, 5475, 5350, 6040, 9707, 9644, 4567, 7167, 7396, 6024, 6329, 2125, 0, 0],
        turnike: [9518, 12309, 3728, 5666, 4779, 5482, 6009, 13476, 11495, 4076, 5204, 5564, 5991, 6153, 10881, 11065, 4122, 5248, 4736, 4550, 4968, 8036, 8161, 3792, 5658, 6283, 4866, 4948, 1851, 0, 0]
    },
    nisan: {
        labels: Array.from({length: 30}, (_, i) => `${i+1}.04.2025`),
        ziyaret: [0, 0, 8801, 9252, 7748, 6946, 4169, 5282, 5881, 6433, 4338, 7014, 6695, 4285, 5635, 5779, 5474, 5583, 7460, 6982, 4107, 5475, 9638, 4902, 5645, 8189, 6250, 3781, 5046, 5405],
        turnike: [0, 0, 7314, 7215, 6261, 5556, 3716, 4623, 5052, 5529, 3516, 5962, 5561, 3785, 4896, 4903, 4672, 4406, 6155, 5545, 3536, 4646, 7859, 4274, 4571, 6746, 5141, 3240, 4334, 4508]
    },
    mayis: {
        labels: Array.from({length: 31}, (_, i) => `${i+1}.05.2025`),
        ziyaret: [7548, 6578, 8835, 6621, 4221, 5228, 5443, 7921, 5901, 8560, 11005, 5453, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        turnike: [6290, 5272, 7383, 5602, 3673, 4397, 4677, 6378, 4723, 7058, 5329, 3950, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    }
};

const totals = {
    mart: ziyaretciData.mart.ziyaret.reduce((a, b) => a + b, 0),
    nisan: ziyaretciData.nisan.ziyaret.reduce((a, b) => a + b, 0),
    mayis: ziyaretciData.mayis.ziyaret.reduce((a, b) => a + b, 0)
};

function updateContent(lang) {
    document.getElementById('pageTitle').textContent = translations[lang].pageTitle;
    document.getElementById('headerTitle').textContent = translations[lang].headerTitle;
    document.getElementById('langSwitchBtn').textContent = lang === 'tr' ? 'EN' : 'TR';
    
    // Tüm data-tr/data-en etiketlerini güncelle (Span içindeki ikonlu başlıklar hariç)
    document.querySelectorAll('[data-tr], [data-en]').forEach(el => {
        if (!el.classList.contains('unit') && el.tagName !== 'SPAN') {
            const key = el.getAttribute('data-' + lang);
            if (key) {
                el.textContent = key;
            }
        }
    });

    // İkonlu h3 başlıklar için
    document.querySelectorAll('h3 span[data-tr], h3 span[data-en]').forEach(span => {
        const key = span.getAttribute('data-' + lang);
        if (key) {
            span.textContent = key;
        }
    });

    // Ana sayfa ünitelerini (m² ve Kişilik/People) güncelle
    document.querySelectorAll('.stat-number .unit').forEach(unitEl => {
        const trText = unitEl.getAttribute('data-tr');
        const enText = unitEl.getAttribute('data-en');
        unitEl.textContent = lang === 'tr' ? trText : enText;
    });

    // Ana sayfa stat description güncelle
    document.querySelectorAll('.stat-description').forEach(descEl => {
        const trText = descEl.getAttribute('data-tr');
        const enText = descEl.getAttribute('data-en');
        descEl.textContent = lang === 'tr' ? trText : enText;
    });

    // Aylık toplamları güncelle
    document.getElementById('totalMart').textContent = totals.mart.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
    document.getElementById('totalNisan').textContent = totals.nisan.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
    document.getElementById('totalMayis').textContent = totals.mayis.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
    
    // GRAFİK VE DİNAMİK YÜZDE GÜNCELLEMELERİ
    if (document.getElementById('detail-fizikiolcek').style.display === 'block') {
        drawGaugeCharts(currentLang); 
        // Detay sayaçlarını güncelle
        document.getElementById('statAreaDetay').textContent = fizikiData.alan.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
        document.getElementById('statCapacityDetay').textContent = fizikiData.kapasite.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
        document.getElementById('statBooksDetay').textContent = fizikiData.basiliKitap.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
        document.getElementById('statResourcesDetay').textContent = fizikiData.toplamKayitliKaynak.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
    }
    if (document.getElementById('detail-ziyaretci').style.display === 'block') {
        drawZiyaretciCharts(currentLang);
        drawAylikToplamChart(currentLang);
    }
    if (document.getElementById('detail-yillikziyaret').style.display === 'block') {
        drawYillikTrendChart(currentLang);
        drawYillikOranChart(currentLang);
    }
    // Popup kapatma butonu metnini güncelle
    document.querySelector('#infoPopup .close-btn').textContent = translations[lang].close;
}

function toggleLanguage() {
    currentLang = currentLang === 'tr' ? 'en' : 'tr';
    document.body.setAttribute('data-lang', currentLang);
    updateContent(currentLang);
    animateStats();
}

document.addEventListener('DOMContentLoaded', () => {
    updateContent(currentLang);
    animateStats();
});


function showDetails(id) {
    document.getElementById("detail-" + id).style.display = "block";
    if (id === 'fizikiolcek') {
        drawGaugeCharts(currentLang);
        // Detay sayaçlarını başlat (AnimateValue ile)
        animateValue(document.getElementById("statAreaDetay"), 0, fizikiData.alan, 2500);
        animateValue(document.getElementById("statCapacityDetay"), 0, fizikiData.kapasite, 2000);
        animateValue(document.getElementById("statBooksDetay"), 0, fizikiData.basiliKitap, 3000);
        animateValue(document.getElementById("statResourcesDetay"), 0, fizikiData.toplamKayitliKaynak, 3500);
    } else if (id === 'ziyaretci') {
        drawZiyaretciCharts(currentLang);
        drawAylikToplamChart(currentLang);
    } else if (id === 'yillikziyaret') {
        drawYillikTrendChart(currentLang);
        drawYillikOranChart(currentLang);
    }
}
function closeDetails(id) {
    document.getElementById("detail-" + id).style.display = "none";
}

// YENİ FONKSİYON: Tıklanabilir İkon Detay Pop-up'ı
function showInfoPopup(type) {
    const lang = currentLang;
    const popup = document.getElementById('infoPopup');
    const chartContainer = document.getElementById('popupChartContainer');
    chartContainer.style.display = 'none'; // Grafiği varsayılan olarak gizle

    let title, value, description, chartData, chartOptions;

    // Veri toplama ve popup içeriğini belirleme
    switch (type) {
        case 'area':
            title = translations[lang].popupArea;
            value = fizikiData.alan.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US') + ' m²';
            description = translations[lang].descArea;
            break;
        case 'capacity':
            title = translations[lang].popupCapacity;
            value = fizikiData.kapasite.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US') + (lang === 'tr' ? ' Kişilik' : ' People');
            description = translations[lang].descCapacity;
            break;
        case 'printedBook':
            title = translations[lang].popupPrintedBook;
            value = fizikiData.basiliKitap.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
            description = translations[lang].descPrintedBook;
            break;
        case 'totalResource':
            title = translations[lang].popupTotalResource;
            value = fizikiData.toplamKayitliKaynak.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
            description = translations[lang].descTotalResource;
            break;
        case 'periodical':
            title = translations[lang].popupPeriodical;
            value = fizikiData.sureliYayinAdet.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
            description = translations[lang].descPeriodical;
            break;
        case 'digitalArchive':
            title = translations[lang].popupDigitalArchive;
            value = fizikiData.digitalArchiveTotal.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
            description = translations[lang].descDigitalArchive;
            // Örnek Bar Chart Verisi (Simülasyon)
            chartData = {
                labels: [lang === 'tr' ? 'Belge' : 'Documents', lang === 'tr' ? 'Kitap' : 'Books', lang === 'tr' ? 'Defter' : 'Ledgers'],
                datasets: [{
                    data: [136, 0.1, 0.567], // Milyon cinsinden
                    label: lang === 'tr' ? 'Dağılım (Milyon)' : 'Distribution (Million)',
                    backgroundColor: ['#ff8800', '#0bb4ff', '#ff0055']
                }]
            };
            chartOptions = {
                indexAxis: 'y',
                scales: { x: { ticks: { color: '#ccc' }, grid: { color: 'rgba(255,255,255,0.1)' } }, y: { ticks: { color: '#ccc' }, grid: { display: false } } },
                animation: { duration: 1500 }
            };
            chartContainer.style.display = 'block';
            break;
        case 'ethesis':
            title = translations[lang].popupEthesis;
            value = fizikiData.eTez.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
            description = translations[lang].descEthesis;
            break;
        case 'ejournal':
            title = translations[lang].popupEjournal;
            value = fizikiData.eDergiMakale; // String olduğu için direkt atanır
            description = translations[lang].descEjournal;
            break;
        default:
            return;
    }

    // Popup elementlerini güncelle
    document.getElementById('popupTitle').textContent = title;
    document.getElementById('popupValue').textContent = value;
    document.getElementById('popupDescription').textContent = description;
    
    // Grafiği çiz (Eğer veri varsa)
    if (chartData) {
        const ctx = document.getElementById('popupChart').getContext('2d');
        const existingChart = Chart.getChart('popupChart');
        if (existingChart) existingChart.destroy();
        new Chart(ctx, {
            type: 'bar',
            data: chartData,
            options: chartOptions
        });
    }

    popup.classList.add('active');
}

function closeInfoPopup() {
    document.getElementById('infoPopup').classList.remove('active');
}
// Helper: Sayı Formatlama (Grafik Tooltip'leri için) (Korundu)
const chartTooltipLocale = (lang) => ({
    callbacks: {
        label: (context) => {
            let label = context.dataset.label || '';
            if (label) {
                label += ': ';
            }
            if (context.parsed.y !== null) {
                label += context.parsed.y.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
            }
            return label;
        },
        title: (context) => context[0].label
    }
});


/* --- ANİMASYONLU SAYAÇ FONKSİYONU --- */
function animateValue(obj, start, end, duration) {
    let startTimestamp = null;
    const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const currentValue = Math.floor(progress * (end - start) + start);
        
        obj.textContent = currentValue.toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US');
        
        if (progress < 1) {
            window.requestAnimationFrame(step);
        } else {
            obj.textContent = end.toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US');
        }
    };
    window.requestAnimationFrame(step);
}

function animateStats() {
    // Ana sayfadaki küçük sayaçlar için (Yavaş animasyon)
    animateValue(document.getElementById("statArea"), 0, fizikiData.alan, 2500);
    animateValue(document.getElementById("statCapacity"), 0, fizikiData.kapasite, 2000);
    animateValue(document.getElementById("statBooks"), 0, fizikiData.basiliKitap, 3000);
    animateValue(document.getElementById("statResources"), 0, fizikiData.toplamKayitliKaynak, 3500);
}


/* --- GRAFİKLER --- */

// YENİ GRAFİK: Gauge/Doughnut Grafikleri (Korundu)
function drawGaugeChart(ctx, value, label, color, lang) {
    const remaining = 100 - value;
    const existingChart = Chart.getChart(ctx.canvas.id);
    if (existingChart) existingChart.destroy();
    
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: [label, lang === 'tr' ? 'Diğer' : 'Other'],
            datasets: [{
                data: [value, remaining],
                backgroundColor: [color, 'rgba(255, 255, 255, 0.1)'],
                borderColor: 'rgba(255, 255, 255, 0.2)',
                borderWidth: 2,
                cutout: '80%', /* Doughnut kalınlığı */
                circumference: 360 /* Tam daire */
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        label: (context) => {
                            const label = context.label || '';
                            const value = context.parsed;
                            if (context.dataset.data[context.dataIndex] > 0) { // Sadece değeri olanlar için göster
                                return `${label}: ${value.toFixed(1)}%`;
                            }
                            return '';
                        }
                    }
                }
            },
            layout: {
                padding: 10
            },
            animation: { duration: 2500, animateRotate: true, animateScale: true }
        }
    });
}

function drawGaugeCharts(lang) {
    // 1. Kitap Oranı
    const ctxKitap = document.getElementById('gaugeKitap').getContext('2d');
    const kitapYuzde = parseFloat(fizikiOranlar.kitap.toFixed(1));
    drawGaugeChart(ctxKitap, kitapYuzde, translations[lang].fizikiKitap, '#D4AF37', lang); /* Altın rengi */
    document.getElementById('kitapYuzde').textContent = kitapYuzde.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');

    // 2. Kaynak Oranı (Toplam kaynağın %100'ünü gösterir, metni toplam sayıyı içerir)
    const ctxKaynak = document.getElementById('gaugeKaynak').getContext('2d');
    const kaynakYuzde = 100; 
    drawGaugeChart(ctxKaynak, kaynakYuzde, translations[lang].fizikiKaynak, '#00ffaa', lang); /* Turkuaz rengi */
    // Kaynak yüzde için özel metin: Milyon olarak gösterim
    document.getElementById('kaynakYuzde').textContent = (fizikiData.toplamKayitliKaynak / 1000000).toFixed(1).toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US') + 'M';


    // 3. Süreli Yayın Oranı
    const ctxYayin = document.getElementById('gaugeYayin').getContext('2d');
    const sureliYayinYuzde = parseFloat(fizikiOranlar.yayin.toFixed(1));
    drawGaugeChart(ctxYayin, sureliYayinYuzde, translations[lang].fizikiYayin, '#ff0055', lang); /* Fuşya rengi */
    document.getElementById('yayinYuzde').textContent = sureliYayinYuzde.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US');
}


// 2. 2025 AYLIK ZİYARETÇİ GRAFİKLERİ (Korundu)
function drawZiyaretciCharts(lang) {
    const commonChartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: { labels: { color: '#fff', font: { size: 14 } } },
            tooltip: chartTooltipLocale(lang)
        },
        scales: {
            x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#ccc', font: { size: 11 } } },
            y: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#ccc', font: { size: 12 }, callback: (value) => value.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US') }, beginAtZero: true }
        },
        animation: { duration: 1500, easing: 'easeOutQuart' }
    };

    const martChart = Chart.getChart('martZiyaretciChart'); if (martChart) martChart.destroy();
    new Chart(document.getElementById('martZiyaretciChart'), {
        type: 'line', data: { labels: ziyaretciData.mart.labels, datasets: [ { label: translations[lang].dailyVisitor, data: ziyaretciData.mart.ziyaret, borderColor: '#0bb4ff', backgroundColor: 'rgba(11, 180, 255, 0.2)', fill: true, tension: 0.3 }, { label: translations[lang].dailyTurnstile, data: ziyaretciData.mart.turnike, borderColor: '#ffeb3b', backgroundColor: 'rgba(255, 235, 59, 0.2)', fill: true, tension: 0.3 } ] }, options: commonChartOptions
    });

    const nisanChart = Chart.getChart('nisanZiyaretciChart'); if (nisanChart) nisanChart.destroy();
    new Chart(document.getElementById('nisanZiyaretciChart'), {
        type: 'line', data: { labels: ziyaretciData.nisan.labels, datasets: [ { label: translations[lang].dailyVisitor, data: ziyaretciData.nisan.ziyaret, borderColor: '#00ffaa', backgroundColor: 'rgba(0, 255, 170, 0.2)', fill: true, tension: 0.3 }, { label: translations[lang].dailyTurnstile, data: ziyaretciData.nisan.turnike, borderColor: '#ff8800', backgroundColor: 'rgba(255, 136, 0, 0.2)', fill: true, tension: 0.3 } ] }, options: commonChartOptions
    });

    const mayisChart = Chart.getChart('mayisZiyaretciChart'); if (mayisChart) mayisChart.destroy();
    new Chart(document.getElementById('mayisZiyaretciChart'), {
        type: 'line', data: { labels: ziyaretciData.mayis.labels, datasets: [ { label: translations[lang].dailyVisitor, data: ziyaretciData.mayis.ziyaret, borderColor: '#6f42c1', backgroundColor: 'rgba(111, 66, 193, 0.2)', fill: true, tension: 0.3 }, { label: translations[lang].dailyTurnstile, data: ziyaretciData.mayis.turnike, borderColor: '#ff0055', backgroundColor: 'rgba(255, 0, 85, 0.2)', fill: true, tension: 0.3 } ] }, options: commonChartOptions
    });
}

function drawAylikToplamChart(lang) {
    const aylikLabels = [ translations[lang].monthMart, translations[lang].monthNisan, translations[lang].monthMayis ];
    const aylikVeriler = [totals.mart, totals.nisan, totals.mayis];

    const aylikChart = Chart.getChart('aylikToplamChart'); if (aylikChart) aylikChart.destroy();

    new Chart(document.getElementById('aylikToplamChart'), {
        type: 'bar',
        data: {
            labels: aylikLabels,
            datasets: [{
                label: translations[lang].visitorCount,
                data: aylikVeriler,
                backgroundColor: ['#0bb4ff', '#00ffaa', '#ffeb3b'],
                borderColor: '#fff',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: chartTooltipLocale(lang)
            },
            scales: {
                x: { grid: { display: false }, ticks: { color: '#ccc', font: { size: 14 } } },
                y: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#ccc', font: { size: 12 }, beginAtZero: true, callback: (value) => value.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US') } }
            },
            animation: { duration: 1800, easing: 'easeOutBounce' }
        }
    });
}

// 3. YILLIK ZİYARETÇİ GRAFİKLERİ (Korundu)
function drawYillikTrendChart(lang) {
    const existingChart = Chart.getChart('yillikTrendChart'); if (existingChart) existingChart.destroy();
    
    new Chart(document.getElementById('yillikTrendChart'), {
        type: 'line',
        data: {
            labels: yillikData.labels,
            datasets: [{
                label: translations[lang].yillikTrend,
                data: yillikData.visits,
                borderColor: '#ff8800',
                backgroundColor: 'rgba(255, 136, 0, 0.4)',
                fill: true,
                tension: 0.4,
                pointRadius: 6,
                pointHoverRadius: 8,
                pointBackgroundColor: '#fff'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: chartTooltipLocale(lang)
            },
            scales: {
                x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#ccc', font: { size: 14 } } },
                y: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#ccc', font: { size: 12 }, beginAtZero: true, callback: (value) => value.toLocaleString(lang === 'tr' ? 'tr-TR' : 'en-US') } }
            },
            animation: { duration: 2500, easing: 'easeOutElastic' }
        }
    });
}

function drawYillikOranChart(lang) {
    const colors = ['#D4AF37', '#0bb4ff', '#00ffaa', '#ff8800', '#ff0055'];
    const percentages = yillikData.visits.map(v => ((v / yillikData.total) * 100).toFixed(2));

    const existingChart = Chart.getChart('yillikOranChart'); if (existingChart) existingChart.destroy();

    new Chart(document.getElementById('yillikOranChart'), {
        type: 'pie',
        data: {
            labels: yillikData.labels,
            datasets: [{
                label: translations[lang].yillikOran,
                data: percentages,
                backgroundColor: colors,
                borderColor: '#0b1a33',
                borderWidth: 2,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'right', labels: { color: '#ccc', font: { size: 14 } } },
                tooltip: {
                    callbacks: {
                        label: (context) => {
                            let label = context.label || '';
                            if (label) {
                                label += ': ';
                            }
                            label += context.parsed.toFixed(2) + ' %';
                            return label;
                        }
                    }
                }
            },
            animation: { animateScale: true, animateRotate: true }
        }
    });
}
</script>
</body>
</html>
